<!DOCTYPE html>
<html>

<head>
    <title>Scroll Progress</title>

    <style type="text/css">
        body {
            margin: 0;
            padding: 0;
        }

        main {
            margin: 0 auto;
            max-width: 40em;
            width: 88%;
        }

        #scroll-bar {
            background-color: #e5e5e5;
            height: 1em;
            position: sticky;
            top: 0;
            width: 100%;
        }

        #scroll-progress {
            background-color: #0088cc;
            height: 1em;
            width: 0;
        }
    </style>
</head>

<body>

    <div id="scroll-bar">
        <div id="scroll-progress" role="progressbar" aria-valuenow="0" aria-valuemin="0" aria-valuemax="100"></div>
    </div>

    <main>

        <h1>Scroll Progress</h1>

        1<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        2<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        3<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        4<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        5<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        6<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        7<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        8<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        9<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        10<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        11<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        12<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        13<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        14<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        15<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        16<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        17<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        18<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        19<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        20<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        21<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        22<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        23<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        24<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        25<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        26<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        27<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        28<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        29<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>
        30<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>.<br>

    </main>

    <script>
        // Get the scroll progress bar
        var bar = document.querySelector('#scroll-progress');

		/**
		 * Run a callback whenever the user scrolls
		 */
        var scrollHandler = function (event) {

            // How far the user has scrolled
            var distance = window.pageYOffset;
            // Calculate the body height
            var height = parseFloat(window.getComputedStyle(document.body).height);

            // Percentage scrolled
            var progress = (distance / height) * 100;
            // Get the viewport height
            var viewportHeight = window.innerHeight || document.documentElement.clientHeight;

            // Calculate percentage addition of the screen height
            const screenHeightProgress = window.screen.height / height * progress;

            // Add the additional progress based on screen height
            progress = progress + screenHeightProgress;

            // Calculate progress
            if (distance + viewportHeight >= height) {
                progress = 100;
            }

            // // Check if at the bottom of the page
            // var viewportHeight = window.innerHeight || document.documentElement.clientHeight;
            // if (distance + viewportHeight >= height) {
            // 	progress = 100;
            // }

            // Set the height of the progress bar
            bar.style.width = progress + '%';

            // Update the aria-valuenow for screen reader support
            bar.setAttribute('aria-valuenow', Math.floor(progress));
        };

        // Listen for scroll events
        window.addEventListener('scroll', scrollHandler);
    </script>

</body>

</html>